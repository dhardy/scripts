#!/bin/sh

# RUST_HOME can be set on the command-line to use a custom installation
if [ -z "$RUST_HOME" ]
then
    export RUST_HOME=/home/install/rust
elif [ ! -x "$RUST_HOME/bin/rustc" ]
then
    echo "Not found: \$RUST_HOME/bin/rustc (expands to $RUST_HOME/bin/rustc)" >&2
    exit 1
fi

PROG=$(basename $0)
if [ ! -x "$RUST_HOME/bin/$PROG" ]; then
    echo "Usage: make a symlink with one of the following names and execute that." >&2
    ls "$RUST_HOME/bin"
    exit 1
fi

export RUST_HOME
export PATH="$PATH:$RUST_HOME/bin"
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:$RUST_HOME/lib"

"$RUST_HOME/bin/$PROG" "$@"
